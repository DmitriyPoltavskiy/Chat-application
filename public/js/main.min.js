function chatCtrl(e,t){var a=this,o=t(),n=new firebase.auth.FacebookAuthProvider,s=new firebase.auth.TwitterAuthProvider,r=new firebase.auth.GithubAuthProvider;a.messages=e.getMessages(),a.shownMessages=e.limitMessages(),a.sendMessage=function(){if(null!=a.author){var t={authorMessage:a.author.displayName,authorId:a.author.uid,authorPhoto:a.author.photoURL,text:a.newMessage};""!=a.newMessage?(e.sendMessage(t),a.newMessage="",$(".chat-footer-message").removeClass("absentText")):($(".chat-footer-message").focus(),$(".chat-footer-message").addClass("absentText"))}else alert("You are not login!")},a.login=function(){o.$signInWithPopup("google")},a.loginF=function(){o.$signInWithPopup(n)},a.loginT=function(){o.$signInWithPopup(s)},a.loginG=function(){o.$signInWithPopup(r).then(function(e){var t=e.credential.accessToken;console.log("token: "+t);var a=e.user;console.log("user: "+a)}).catch(function(e){var t=e.code;console.log("errorCode: "+t);var a=e.message;console.log("errorMessage: "+a);var o=e.email;console.log("email: "+o);var n=e.credential;console.log("credential: "+n)})},a.logout=function(){o.$signOut()},o.$onAuthStateChanged(function(e){console.log(e),a.author=e})}function chatService(e){var t=firebase.database().ref().child("messages"),a={};return a.getMessages=function(){return e(t)},a.sendMessage=function(e){a.getMessages().$add(e)},a.limitMessages=function(){return e(t.limitToLast(20))},a}function clickToSend(){return function(e,t,a){t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$eval(a.sendDirective)}),t.preventDefault())})}}var config={apiKey:"AIzaSyCq4m6rjQA8NROOK-VT2IOUww8bv374gZg",authDomain:"chatapp-2b28b.firebaseapp.com",databaseURL:"https://chatapp-2b28b.firebaseio.com",storageBucket:"chatapp-2b28b.appspot.com",messagingSenderId:"577030966423"};firebase.initializeApp(config),angular.module("chatApp",["firebase"]),angular.module("chatApp").controller("chatCtrl",["ChatService","$firebaseAuth",chatCtrl]),angular.module("chatApp").factory("ChatService",["$firebaseArray",chatService]),angular.module("chatApp").directive("sendDirective",[clickToSend]),angular.module("chatApp").directive("scrollTo",function(){return{restrict:"A",link:function(){$(".chat-message").ready(function(){var e=document.getElementById("scrollHeight").scrollHeight;$(".chat-body").scrollTo(e)})}}}),angular.module("chatApp").directive("pressKey",function(){return{restrict:"A",link:function(){$(document).keydown(function(){$(".chat-footer-message").focus()})}}});