function chatCtrl(e,a){var t=this,o=a(),n=new firebase.auth.FacebookAuthProvider,s=new firebase.auth.TwitterAuthProvider,i=new firebase.auth.GithubAuthProvider;t.messages=e.getMessages(),t.shownMessages=e.limitMessages(),t.sendMessage=function(){if(null!=t.author){var a={authorMessage:t.author.displayName,authorId:t.author.uid,authorPhoto:t.author.photoURL,text:t.newMessage};""!=t.newMessage?(e.sendMessage(a),t.newMessage="",$(".chat-footer-message").removeClass("absentText")):($(".chat-footer-message").focus(),$(".chat-footer-message").addClass("absentText"))}else alert("You are not login!")},t.login=function(){o.$signInWithPopup("google")},t.loginF=function(){o.$signInWithPopup(n)},t.loginT=function(){o.$signInWithPopup(s)},t.loginG=function(){o.$signInWithPopup(i).then(function(e){var a=e.credential.accessToken;console.log("token: "+a);var t=e.user;console.log("user: "+t)}).catch(function(e){var a=e.code;console.log("errorCode: "+a);var t=e.message;console.log("errorMessage: "+t);var o=e.email;console.log("email: "+o);var n=e.credential;console.log("credential: "+n)})},t.logout=function(){o.$signOut()},o.$onAuthStateChanged(function(e){console.log(e),t.author=e})}function chatService(e){var a=firebase.database().ref().child("messages"),t={};return t.getMessages=function(){return e(a)},t.sendMessage=function(e){t.getMessages().$add(e)},t.limitMessages=function(){return e(a.limitToLast(20))},t}function clickToSend(){return function(e,a,t){a.bind("keydown keypress",function(a){13===a.which&&(e.$apply(function(){e.$eval(t.sendDirective)}),a.preventDefault())})}}var config={apiKey:"AIzaSyCq4m6rjQA8NROOK-VT2IOUww8bv374gZg",authDomain:"chatapp-2b28b.firebaseapp.com",databaseURL:"https://chatapp-2b28b.firebaseio.com",storageBucket:"chatapp-2b28b.appspot.com",messagingSenderId:"577030966423"};firebase.initializeApp(config),angular.module("chatApp",["firebase"]),angular.module("chatApp").controller("chatCtrl",["ChatService","$firebaseAuth",chatCtrl]),angular.module("chatApp").factory("ChatService",["$firebaseArray",chatService]),angular.module("chatApp").directive("sendDirective",[clickToSend]);